# CalendarApp 打包说明

## 打包信息

**最新打包时间**: 2026-01-22 14:56  
**版本号**: v1.0.0  
**版本代码**: 1  
**构建次数**: #2 ✅

## APK 文件信息

### Release 版本（发布版）

- **文件名**: `app-release.apk`
- **大小**: 58.86 MB
- **路径**: `android/app/build/outputs/apk/release/app-release.apk`
- **用途**: 正式发布到应用商店或分发给用户
- **特点**: 
  - 已启用代码混淆优化
  - 体积更小
  - 性能更好
  - 使用 Debug 签名（测试用）

### Debug 版本（调试版）

- **文件名**: `app-debug.apk`
- **大小**: 128.07 MB
- **路径**: `android/app/build/outputs/apk/debug/app-debug.apk`
- **用途**: 开发测试使用
- **特点**:
  - 包含调试信息
  - 体积较大
  - 可连接调试工具

## 打包命令

### 构建 Release APK

```bash
cd android
.\gradlew assembleRelease
```

### 构建 Debug APK

```bash
cd android
.\gradlew assembleDebug
```

### 清理构建缓存

```bash
cd android
.\gradlew clean
```

## 已实现功能

### 核心功能
✅ 日历多视图（月视图、周视图、日视图）  
✅ 日程管理（创建、编辑、删除）  
✅ 重复日程（支持 RFC 5545 RRULE 标准）  
✅ 智能提醒（本地推送通知）  
✅ 农历支持（农历日期、节气、节日）  
✅ 应用设置（主题、通知、周起始日等）  

### 性能优化
✅ 懒加载机制  
✅ 农历数据缓存  
✅ 滑动预加载  
✅ 内存优化  

## 安装说明

### Android 设备安装

1. 将 APK 文件传输到 Android 设备
2. 在设备上打开 APK 文件
3. 允许"从此来源安装应用"权限
4. 点击"安装"按钮
5. 安装完成后点击"打开"

### 权限要求

应用运行需要以下权限：
- **通知权限**: 用于日程提醒（Android 13+）
- **存储权限**: 用于数据库存储（自动授予）

## 已知问题与修复记录

### 已修复问题

1. ✅ **Release APK "Unable to load script" 错误**
   - 问题：首次打包的 APK 安装后显示红屏错误
   - 原因：`@react-native-community/blur` 依赖冲突导致 JS Bundle 打包异常
   - 修复：移除 blur 依赖，使用普通 View 替代，重新 clean + build
   - 修复时间：2026-01-22 14:30

2. ✅ **EventForm 输入框清空立即重置问题**
   - 问题：重复间隔和次数输入框删除内容时立即恢复为 1
   - 原因：onChangeText 中立即验证并设置数值
   - 修复：分离文本状态和数值状态，在 onBlur 时才验证
   - 修复时间：2026-01-22 14:45

### 当前已知问题

1. **Release APK 使用 Debug 签名**
   - 当前使用的是 Debug 签名，仅用于测试
   - 正式发布需要生成 Release 签名密钥

2. **最低系统要求**
   - Android 6.0 (API 24) 及以上版本

## 下一步计划

### 测试阶段
- [ ] 功能测试（日程管理、提醒、农历功能）
- [ ] 性能测试（滑动流畅度、内存占用）
- [ ] 兼容性测试（不同 Android 版本、不同屏幕尺寸）
- [ ] 稳定性测试（长时间运行、大量数据）

### 正式发布准备
- [ ] 生成 Release 签名密钥
- [ ] 重新打包签名版本
- [ ] 准备应用商店资源
  - [ ] 应用图标（512x512）
  - [ ] 应用截图（至少4张）
  - [ ] 功能描述
  - [ ] 隐私政策
- [ ] 应用商店上架

## 技术栈

- React Native 0.83.1
- TypeScript 5.8.3
- Zustand 5.0.9 (状态管理)
- SQLite 6.0.1 (本地数据库)
- Notifee 9.1.8 (本地通知)
- Lunar-JavaScript 1.7.7 (农历计算)

## 项目统计

- **开发周期**: 6周（2026-01-01 至 2026-01-22）
- **代码行数**: 约 15,000+ 行
- **组件数量**: 30+ 个
- **功能完成度**: 85%

## 打包历史

### v1.0.0 Build #2 (2026-01-22 15:00)
- ✅ 修复 EventForm 输入框体验问题
- ✅ 优化重复日程输入逻辑
- ✅ 代码优化和性能改进

### v1.0.0 Build #1 (2026-01-22 14:30)
- ✅ 修复 Release APK "Unable to load script" 错误
- ✅ 移除 @react-native-community/blur 依赖
- ✅ 首次成功打包 Release 版本

---

**开发者**: AI 助手  
**项目类型**: 腾讯营地大前端项目大作业  
**最后更新**: 2026-01-22 15:00
